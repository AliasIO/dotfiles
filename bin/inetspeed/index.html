<!DOCTYPE html>

<html>
	<head>
		<title></title>

		<meta charset="utf-8">

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
		<script src="lib/highcharts/highcharts.js"></script>
	</head>
	<body>
		<div id="container">Loading&hellip;</div>

		<script>
			var chart;

			$(document).ready(function() {
				$.get('speed.txt', null, function(data) {
					dataset = new Array;

					data.split("\n").map(function(pair) {
						if ( pair ) {
							pair = pair.split(' ');

							pair[0] = parseInt(( parseInt(pair[0]) + 60 * 60 * 11 ) + '000');
							pair[1] = parseFloat(pair[1]);

							dataset.push(pair);
						}
					});

					chart = new Highcharts.Chart({
						chart: {
							renderTo: 'container',
							type: 'area',
							zoomType: 'x'
						},
						title: {
							text: 'Internet Speed',
						},
						xAxis: {
							type: 'datetime'
						},
						yAxis: {
							title: {
								text: 'MB/s'
							},
							min: 0
						},
						plotOptions: {
							area: {
								fillColor: {
									linearGradient: [0, 0, 0, 300],
									stops: [
									[0, Highcharts.getOptions().colors[0]],
									[1, 'rgba(2,0,0,0)']
									]
								},
								lineWidth: 1,
								marker: {
									enabled: false,
									states: {
										hover: {
											enabled: true,
											radius: 5
										}
									}
								},
								shadow: false,
								states: {
									hover: {
										lineWidth: 1
									}
								}
							}
						},
						series: [{
							name: 'Speed',
							data: dataset
						}]
					});
				}, 'text');
			});
		</script>
	</body>
</html>
